{"ast":null,"code":"var _jsxFileName = \"/Users/alnura/Desktop/BookStore-React/src/pages/favorites/Favorites.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport BookCard from '../../components/bookcard/BookCard';\nimport Spinner from '../../components/spinner/Spinner';\nimport './style.css';\nimport { auth } from '../../firebase';\nimport { onAuthStateChanged } from \"firebase/auth\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport { loadFavorites, saveFavorites, toggleSelect, unselectAll, removeSelected, clearAll, setUser } from '../../features/favoritesSlice';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Favorites = () => {\n  _s();\n  const dispatch = useDispatch();\n  const {\n    favorites,\n    selected,\n    loading,\n    mergedWithLocal,\n    user\n  } = useSelector(state => state.favorites);\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, currentUser => {\n      dispatch(setUser(currentUser));\n      dispatch(loadFavorites(currentUser));\n    });\n    return () => unsubscribe();\n  }, [dispatch]);\n  useEffect(() => {\n    if (mergedWithLocal) {\n      alert(\"Your local favorites were merged with your account.\");\n    }\n  }, [mergedWithLocal]);\n  const handleSaveFavorites = updatedFavorites => {\n    dispatch(saveFavorites({\n      user,\n      favorites: updatedFavorites\n    }));\n  };\n  const handleRemoveSelected = () => {\n    dispatch(removeSelected());\n    handleSaveFavorites(favorites.filter(book => !selected.includes(book.title)));\n  };\n  const handleClearAll = () => {\n    dispatch(clearAll());\n    handleSaveFavorites([]);\n  };\n  const handleToggleSelect = title => {\n    dispatch(toggleSelect(title));\n  };\n  const handleUnselectAll = () => {\n    dispatch(unselectAll());\n  };\n  const addSelectedToCart = () => {\n    const selectedBooks = favorites.filter(book => selected.includes(book.title));\n    const existingCart = JSON.parse(localStorage.getItem('cart')) || [];\n    const updatedCart = [...existingCart, ...selectedBooks.filter(book => !existingCart.some(item => item.title === book.title))];\n    localStorage.setItem('cart', JSON.stringify(updatedCart));\n    window.dispatchEvent(new Event('cartUpdated'));\n    alert(`${selectedBooks.length} book(s) added to cart`);\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    className: \"favorites-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"favorites-title\",\n      children: \"My Favorites\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), favorites.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"favorites-empty\",\n      children: \"No books added yet.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"favorites-actions\",\n        children: [selected.length > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-unselect-all\",\n            onClick: handleUnselectAll,\n            children: \"Cancel the selection\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"remove-selected\",\n            onClick: handleRemoveSelected,\n            children: [\"Remove Selected (\", selected.length, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn add-to-cart\",\n            onClick: addSelectedToCart,\n            children: [\"Add to Cart (\", selected.length, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn clear-all\",\n          onClick: handleClearAll,\n          children: \"Clear All\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"favorites-grid\",\n        children: favorites.map(book => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `favorite-item ${selected.includes(book.title) ? 'selected' : ''}`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"favorite-checkbox\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              checked: selected.includes(book.title),\n              onChange: () => handleToggleSelect(book.title)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(BookCard, {\n            image: book.image,\n            title: book.title,\n            author: book.author,\n            price: book.price,\n            rating: book.rating\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 17\n          }, this)]\n        }, book.title, true, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n};\n_s(Favorites, \"0BntcjlIi9kNE3egjaE7Pbhiscg=\", false, function () {\n  return [useDispatch, useSelector];\n});\n_c = Favorites;\nexport default Favorites;\nvar _c;\n$RefreshReg$(_c, \"Favorites\");","map":{"version":3,"names":["React","useEffect","BookCard","Spinner","auth","onAuthStateChanged","useDispatch","useSelector","loadFavorites","saveFavorites","toggleSelect","unselectAll","removeSelected","clearAll","setUser","jsxDEV","_jsxDEV","Fragment","_Fragment","Favorites","_s","dispatch","favorites","selected","loading","mergedWithLocal","user","state","unsubscribe","currentUser","alert","handleSaveFavorites","updatedFavorites","handleRemoveSelected","filter","book","includes","title","handleClearAll","handleToggleSelect","handleUnselectAll","addSelectedToCart","selectedBooks","existingCart","JSON","parse","localStorage","getItem","updatedCart","some","item","setItem","stringify","window","dispatchEvent","Event","length","fileName","_jsxFileName","lineNumber","columnNumber","className","children","onClick","map","type","checked","onChange","image","author","price","rating","_c","$RefreshReg$"],"sources":["/Users/alnura/Desktop/BookStore-React/src/pages/favorites/Favorites.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport BookCard from '../../components/bookcard/BookCard';\nimport Spinner from '../../components/spinner/Spinner';\nimport './style.css';\n\nimport { auth } from '../../firebase';\nimport { onAuthStateChanged } from \"firebase/auth\";\n\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  loadFavorites,\n  saveFavorites,\n  toggleSelect,\n  unselectAll,\n  removeSelected,\n  clearAll,\n  setUser\n} from '../../features/favoritesSlice';\n\nconst Favorites = () => {\n  const dispatch = useDispatch();\n\n  const { favorites, selected, loading, mergedWithLocal, user } = useSelector(state => state.favorites);\n\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, (currentUser) => {\n      dispatch(setUser(currentUser));\n      dispatch(loadFavorites(currentUser));\n    });\n    return () => unsubscribe();\n  }, [dispatch]);\n\n  useEffect(() => {\n    if (mergedWithLocal) {\n      alert(\"Your local favorites were merged with your account.\");\n    }\n  }, [mergedWithLocal]);\n\n  const handleSaveFavorites = (updatedFavorites) => {\n    dispatch(saveFavorites({ user, favorites: updatedFavorites }));\n  };\n\n  const handleRemoveSelected = () => {\n    dispatch(removeSelected());\n    handleSaveFavorites(favorites.filter(book => !selected.includes(book.title)));\n  };\n\n  const handleClearAll = () => {\n    dispatch(clearAll());\n    handleSaveFavorites([]);\n  };\n\n  const handleToggleSelect = (title) => {\n    dispatch(toggleSelect(title));\n  };\n\n  const handleUnselectAll = () => {\n    dispatch(unselectAll());\n  };\n\n  const addSelectedToCart = () => {\n    const selectedBooks = favorites.filter(book => selected.includes(book.title));\n    const existingCart = JSON.parse(localStorage.getItem('cart')) || [];\n\n    const updatedCart = [\n      ...existingCart,\n      ...selectedBooks.filter(book => !existingCart.some(item => item.title === book.title)),\n    ];\n\n    localStorage.setItem('cart', JSON.stringify(updatedCart));\n    window.dispatchEvent(new Event('cartUpdated'));\n    alert(`${selectedBooks.length} book(s) added to cart`);\n  };\n\n  if (loading) {\n    return <Spinner />;\n  }\n\n  return (\n    <main className=\"favorites-page\">\n      <h1 className=\"favorites-title\">My Favorites</h1>\n\n      {favorites.length === 0 ? (\n        <p className=\"favorites-empty\">No books added yet.</p>\n      ) : (\n        <>\n          <div className=\"favorites-actions\">\n            {selected.length > 0 && (\n              <>\n                <button className=\"btn-unselect-all\" onClick={handleUnselectAll}>\n                  Cancel the selection\n                </button>\n                <button className=\"remove-selected\" onClick={handleRemoveSelected}>\n                  Remove Selected ({selected.length})\n                </button>\n                <button className=\"btn add-to-cart\" onClick={addSelectedToCart}>\n                  Add to Cart ({selected.length})\n                </button>\n              </>\n            )}\n            <button className=\"btn clear-all\" onClick={handleClearAll}>\n              Clear All\n            </button>\n          </div>\n\n          <div className=\"favorites-grid\">\n            {favorites.map((book) => (\n              <div\n                key={book.title}\n                className={`favorite-item ${\n                  selected.includes(book.title) ? 'selected' : ''\n                }`}\n              >\n                <div className=\"favorite-checkbox\">\n                  <input\n                    type=\"checkbox\"\n                    checked={selected.includes(book.title)}\n                    onChange={() => handleToggleSelect(book.title)}\n                  />\n                </div>\n                <BookCard\n                  image={book.image}\n                  title={book.title}\n                  author={book.author}\n                  price={book.price}\n                  rating={book.rating}\n                />\n              </div>\n            ))}\n          </div>\n        </>\n      )}\n    </main>\n  );\n};\n\nexport default Favorites;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}