{"ast":null,"code":"var _jsxFileName = \"/Users/alnura/Desktop/BookStore-React/src/pages/fiction/Fiction.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from \"react\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport { useBooks } from \"../../context/BooksContext\";\nimport { useDebounce } from \"../../hooks/useDebounce\";\nimport BookCard from \"../../components/bookcard/BookCard\";\nimport Spinner from \"../../components/spinner/Spinner\";\nimport \"./style.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Fiction = () => {\n  _s();\n  // const { books, loading, error, fetchBySubject } = useBooks();\n\n  // useEffect(() => {\n  //   fetchBySubject(\"fiction\");\n  // }, []);\n\n  const {\n    books,\n    loading,\n    error,\n    fetchBooks\n  } = useBooks();\n  const location = useLocation();\n  const navigate = useNavigate();\n  const params = new URLSearchParams(location.search);\n  const query = params.get(\"search\") || \"all\";\n  const page = parseInt(params.get(\"page\")) || 1;\n  const limit = parseInt(params.get(\"limit\")) || 10;\n  const debouncedQuery = useDebounce(query, 500);\n  useEffect(() => {\n    fetchBySubject({\n      query: debouncedQuery,\n      page,\n      limit\n    });\n  }, [debouncedQuery, page, limit]);\n  const updateParams = newParams => {\n    const p = new URLSearchParams(location.search);\n    Object.entries(newParams).forEach(([key, value]) => p.set(key, value));\n    navigate(`/books?${p.toString()}`);\n  };\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    className: \"fiction-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"fiction-title\",\n      children: \"Fiction Books\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loader\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }, this) : error ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"error\",\n      children: [\"Error: \", error]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"fiction-grid\",\n      children: books.length > 0 ? books.map(book => /*#__PURE__*/_jsxDEV(BookCard, {\n        image: book.cover_id ? `https://covers.openlibrary.org/b/id/${book.cover_id}-M.jpg` : \"https://via.placeholder.com/150x220?text=No+Cover\",\n        rating: Math.floor(Math.random() * 5) + 1,\n        title: book.title,\n        author: book.authors ? book.authors[0].name : \"Unknown Author\",\n        price: Math.floor(Math.random() * 30) + 10\n      }, book.key, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 15\n      }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"error\",\n        children: \"No books found\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 5\n  }, this);\n};\n_s(Fiction, \"ylvGjJx2bBBEPBh6KlvmjWnZcsE=\", false, function () {\n  return [useBooks, useLocation, useNavigate, useDebounce];\n});\n_c = Fiction;\nexport default Fiction;\nvar _c;\n$RefreshReg$(_c, \"Fiction\");","map":{"version":3,"names":["React","useEffect","useLocation","useNavigate","useBooks","useDebounce","BookCard","Spinner","jsxDEV","_jsxDEV","Fiction","_s","books","loading","error","fetchBooks","location","navigate","params","URLSearchParams","search","query","get","page","parseInt","limit","debouncedQuery","fetchBySubject","updateParams","newParams","p","Object","entries","forEach","key","value","set","toString","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","book","image","cover_id","rating","Math","floor","random","title","author","authors","name","price","_c","$RefreshReg$"],"sources":["/Users/alnura/Desktop/BookStore-React/src/pages/fiction/Fiction.js"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport { useBooks } from \"../../context/BooksContext\";\nimport { useDebounce } from \"../../hooks/useDebounce\"; \n\nimport BookCard from \"../../components/bookcard/BookCard\";\nimport Spinner from \"../../components/spinner/Spinner\";\n\nimport \"./style.css\";\n\nconst Fiction = () => {\n  // const { books, loading, error, fetchBySubject } = useBooks();\n\n  // useEffect(() => {\n  //   fetchBySubject(\"fiction\");\n  // }, []);\n\n  const { books, loading, error, fetchBooks } = useBooks();\n  const location = useLocation();\n  const navigate = useNavigate();\n\n  const params = new URLSearchParams(location.search);\n  const query = params.get(\"search\") || \"all\";\n  const page = parseInt(params.get(\"page\")) || 1;\n  const limit = parseInt(params.get(\"limit\")) || 10;\n\n  const debouncedQuery = useDebounce(query, 500);\n\n  useEffect(() => {\n    fetchBySubject({ query: debouncedQuery, page, limit });\n  }, [debouncedQuery, page, limit]);\n\n  const updateParams = (newParams) => {\n    const p = new URLSearchParams(location.search);\n    Object.entries(newParams).forEach(([key, value]) => p.set(key, value));\n    navigate(`/books?${p.toString()}`);\n  };\n\n  return (\n    <main className=\"fiction-page\">\n      <h1 className=\"fiction-title\">Fiction Books</h1>\n\n      {loading ? (\n        <div className=\"loader\"></div>\n      ) : error ? (\n        <p className=\"error\">Error: {error}</p>\n      ) : (\n        <section className=\"fiction-grid\">\n          {books.length > 0 ? (\n            books.map((book) => (\n              <BookCard\n                key={book.key}\n                image={\n                  book.cover_id\n                    ? `https://covers.openlibrary.org/b/id/${book.cover_id}-M.jpg`\n                    : \"https://via.placeholder.com/150x220?text=No+Cover\"\n                }\n                rating={Math.floor(Math.random() * 5) + 1}\n                title={book.title}\n                author={book.authors ? book.authors[0].name : \"Unknown Author\"}\n                price={Math.floor(Math.random() * 30) + 10}\n              />\n            ))\n          ) : (\n            <p className=\"error\">No books found</p>\n          )}\n        </section>\n      )}\n    </main>\n  );\n};\n\nexport default Fiction;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}