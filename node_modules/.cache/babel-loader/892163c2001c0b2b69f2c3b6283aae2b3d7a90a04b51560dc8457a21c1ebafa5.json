{"ast":null,"code":"// import { createContext, useContext, useState, useEffect } from \"react\";\n\n// const BooksContext = createContext();\n\n// export const BooksProvider = ({ children }) => {\n//   const [books, setBooks] = useState([]);\n//   const [loading, setLoading] = useState(true);\n//   const [error, setError] = useState(null);\n\n//   const fetchBooks = async (query = \"all\") => {\n//     setLoading(true);\n//     setError(null);\n//     try {\n//       const res = await fetch(`https://openlibrary.org/search.json?q=${encodeURIComponent(query)}&limit=20`);\n//       const data = await res.json();\n//       setBooks(data.docs || []);\n//     } \n//     catch (err) {\n//       setError(err.message || \"Something went wrong\");\n//     } \n//     finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const fetchBySubject = async (subject) => {\n//     setLoading(true);\n//     setError(null);\n//     try {\n//       const res = await fetch(`https://openlibrary.org/subjects/${encodeURIComponent(subject)}.json?limit=20`);\n//       const data = await res.json();\n//       setBooks(data.works || []);\n//     } \n//     catch (err) {\n//       setError(err.message || \"Something went wrong\");\n//     } \n//     finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   useEffect(() => {\n//     fetchBooks(\"all\");\n//   }, []);\n\n//   return (\n//     <BooksContext.Provider value={{ books, loading, error, fetchBooks, fetchBySubject }}>\n//       {children}\n//     </BooksContext.Provider>\n//   );\n// };\n\n// export const useBooks = () => useContext(BooksContext);\n\n// import { createContext, useContext, useState, useRef } from \"react\";\n// import { \n//   fetchBooks as fetchBooksService, \n//   fetchBySubject as fetchBySubjectService \n// } from \"../services/apiService\";\n\n// const BooksContext = createContext();\n\n// export const BooksProvider = ({ children }) => {\n//   const [books, setBooks] = useState([]);\n//   const [loading, setLoading] = useState(true);\n//   const [error, setError] = useState(null);\n\n//   const abortControllerRef = useRef(null);\n\n//   const cancelPreviousRequest = () => {\n//     if (abortControllerRef.current) {\n//       abortControllerRef.current.abort();\n//     }\n//     abortControllerRef.current = new AbortController();\n//     return abortControllerRef.current.signal;\n//   };\n\n//   const fetchBooks = async ({ query = \"all\", page = 1, limit = 10 }) => {\n//     setLoading(true);\n//     setError(null);\n\n//     const signal = cancelPreviousRequest();\n\n//     try {\n//       const booksData = await fetchBooksService({\n//         query,\n//         page,\n//         limit,\n//         signal,\n//       });\n//       setBooks(booksData);\n//     } catch (err) {\n//       if (err.name !== \"AbortError\") {\n//         setError(err.message || \"Something went wrong\");\n//       }\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const fetchBySubject = async (subject) => {\n//     setLoading(true);\n//     setError(null);\n\n//     const signal = cancelPreviousRequest();\n\n//     try {\n//       const booksData = await fetchBySubjectService(subject, { signal });\n//       setBooks(booksData);\n//     } catch (err) {\n//       if (err.name !== \"AbortError\") {\n//         setError(err.message || \"Something went wrong\");\n//       }\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   return (\n//     <BooksContext.Provider\n//       value={{\n//         books,\n//         loading,\n//         error,\n//         fetchBooks,\n//         fetchBySubject,\n//       }}\n//     >\n//       {children}\n//     </BooksContext.Provider>\n//   );\n// };\n\n// export const useBooks = () => useContext(BooksContext);","map":{"version":3,"names":[],"sources":["/Users/alnura/Desktop/BookStore-React/src/context/BooksContext.js"],"sourcesContent":["// import { createContext, useContext, useState, useEffect } from \"react\";\n\n// const BooksContext = createContext();\n\n// export const BooksProvider = ({ children }) => {\n//   const [books, setBooks] = useState([]);\n//   const [loading, setLoading] = useState(true);\n//   const [error, setError] = useState(null);\n\n//   const fetchBooks = async (query = \"all\") => {\n//     setLoading(true);\n//     setError(null);\n//     try {\n//       const res = await fetch(`https://openlibrary.org/search.json?q=${encodeURIComponent(query)}&limit=20`);\n//       const data = await res.json();\n//       setBooks(data.docs || []);\n//     } \n//     catch (err) {\n//       setError(err.message || \"Something went wrong\");\n//     } \n//     finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const fetchBySubject = async (subject) => {\n//     setLoading(true);\n//     setError(null);\n//     try {\n//       const res = await fetch(`https://openlibrary.org/subjects/${encodeURIComponent(subject)}.json?limit=20`);\n//       const data = await res.json();\n//       setBooks(data.works || []);\n//     } \n//     catch (err) {\n//       setError(err.message || \"Something went wrong\");\n//     } \n//     finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   useEffect(() => {\n//     fetchBooks(\"all\");\n//   }, []);\n\n//   return (\n//     <BooksContext.Provider value={{ books, loading, error, fetchBooks, fetchBySubject }}>\n//       {children}\n//     </BooksContext.Provider>\n//   );\n// };\n\n// export const useBooks = () => useContext(BooksContext);\n\n// import { createContext, useContext, useState, useRef } from \"react\";\n// import { \n//   fetchBooks as fetchBooksService, \n//   fetchBySubject as fetchBySubjectService \n// } from \"../services/apiService\";\n\n// const BooksContext = createContext();\n\n// export const BooksProvider = ({ children }) => {\n//   const [books, setBooks] = useState([]);\n//   const [loading, setLoading] = useState(true);\n//   const [error, setError] = useState(null);\n\n//   const abortControllerRef = useRef(null);\n\n//   const cancelPreviousRequest = () => {\n//     if (abortControllerRef.current) {\n//       abortControllerRef.current.abort();\n//     }\n//     abortControllerRef.current = new AbortController();\n//     return abortControllerRef.current.signal;\n//   };\n\n//   const fetchBooks = async ({ query = \"all\", page = 1, limit = 10 }) => {\n//     setLoading(true);\n//     setError(null);\n\n//     const signal = cancelPreviousRequest();\n\n//     try {\n//       const booksData = await fetchBooksService({\n//         query,\n//         page,\n//         limit,\n//         signal,\n//       });\n//       setBooks(booksData);\n//     } catch (err) {\n//       if (err.name !== \"AbortError\") {\n//         setError(err.message || \"Something went wrong\");\n//       }\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const fetchBySubject = async (subject) => {\n//     setLoading(true);\n//     setError(null);\n\n//     const signal = cancelPreviousRequest();\n\n//     try {\n//       const booksData = await fetchBySubjectService(subject, { signal });\n//       setBooks(booksData);\n//     } catch (err) {\n//       if (err.name !== \"AbortError\") {\n//         setError(err.message || \"Something went wrong\");\n//       }\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   return (\n//     <BooksContext.Provider\n//       value={{\n//         books,\n//         loading,\n//         error,\n//         fetchBooks,\n//         fetchBySubject,\n//       }}\n//     >\n//       {children}\n//     </BooksContext.Provider>\n//   );\n// };\n\n// export const useBooks = () => useContext(BooksContext);"],"mappings":"AAAA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}