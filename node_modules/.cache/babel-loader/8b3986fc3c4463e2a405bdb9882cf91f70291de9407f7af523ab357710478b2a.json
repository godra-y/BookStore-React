{"ast":null,"code":"var _s = $RefreshSig$();\nimport React, { useEffect } from \"react\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport { useBooks } from \"../../context/BooksContext\";\nimport { useDebounce } from \"../../hooks/useDebounce\";\nimport BookCard from \"../../components/bookcard/BookCard\";\nimport Spinner from \"../../components/spinner/Spinner\";\nimport \"./style.css\";\nconst Fiction = () => {\n  _s();\n  // const { books, loading, error, fetchBySubject } = useBooks();\n\n  // useEffect(() => {\n  //   fetchBySubject(\"fiction\");\n  // }, []);\n\n  const {\n    books,\n    loading,\n    error,\n    fetchBySubject\n  } = useBooks();\n  const location = useLocation();\n  const navigate = useNavigate();\n  const params = new URLSearchParams(location.search);\n  const query = params.get(\"search\") || \"all\";\n  const page = parseInt(params.get(\"page\")) || 1;\n  const limit = parseInt(params.get(\"limit\")) || 10;\n  const debouncedQuery = useDebounce(query, 500);\n  useEffect(() => {\n    fetchBySubject(\"fiction\", {\n      query: debouncedQuery,\n      page,\n      limit\n    });\n  }, [debouncedQuery, page, limit]);\n  const updateParams = newParams => {\n    const p = new URLSearchParams(location.search);\n    Object.entries(newParams).forEach(([key, value]) => p.set(key, value));\n    navigate(`/books?${p.toString()}`);\n  };\n\n  // return (\n  //   <main className=\"fiction-page\">\n  //     <h1 className=\"fiction-title\">Fiction Books</h1>\n\n  //     {loading ? (\n  //       <div className=\"loader\"></div>\n  //     ) : error ? (\n  //       <p className=\"error\">Error: {error}</p>\n  //     ) : (\n  //       <section className=\"fiction-grid\">\n  //         {books.length > 0 ? (\n  //           books.map((book) => (\n  //             <BookCard\n  //               key={book.key}\n  //               image={\n  //                 book.cover_id\n  //                   ? `https://covers.openlibrary.org/b/id/${book.cover_id}-M.jpg`\n  //                   : \"https://via.placeholder.com/150x220?text=No+Cover\"\n  //               }\n  //               rating={Math.floor(Math.random() * 5) + 1}\n  //               title={book.title}\n  //               author={book.authors ? book.authors[0].name : \"Unknown Author\"}\n  //               price={Math.floor(Math.random() * 30) + 10}\n  //             />\n  //           ))\n  //         ) : (\n  //           <p className=\"error\">No books found</p>\n  //         )}\n  //       </section>\n  //     )}\n  //   </main>\n  // );\n};\n_s(Fiction, \"zbakBVk/VGa+v6aI+ZwlJKbYOjQ=\", false, function () {\n  return [useBooks, useLocation, useNavigate, useDebounce];\n});\n_c = Fiction;\nexport default Fiction;\nvar _c;\n$RefreshReg$(_c, \"Fiction\");","map":{"version":3,"names":["React","useEffect","useLocation","useNavigate","useBooks","useDebounce","BookCard","Spinner","Fiction","_s","books","loading","error","fetchBySubject","location","navigate","params","URLSearchParams","search","query","get","page","parseInt","limit","debouncedQuery","updateParams","newParams","p","Object","entries","forEach","key","value","set","toString","_c","$RefreshReg$"],"sources":["/Users/alnura/Desktop/BookStore-React/src/pages/fiction/Fiction.js"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport { useBooks } from \"../../context/BooksContext\";\nimport { useDebounce } from \"../../hooks/useDebounce\"; \n\nimport BookCard from \"../../components/bookcard/BookCard\";\nimport Spinner from \"../../components/spinner/Spinner\";\n\nimport \"./style.css\";\n\nconst Fiction = () => {\n  // const { books, loading, error, fetchBySubject } = useBooks();\n\n  // useEffect(() => {\n  //   fetchBySubject(\"fiction\");\n  // }, []);\n\n  const { books, loading, error, fetchBySubject } = useBooks();\n  const location = useLocation();\n  const navigate = useNavigate();\n\n  const params = new URLSearchParams(location.search);\n  const query = params.get(\"search\") || \"all\";\n  const page = parseInt(params.get(\"page\")) || 1;\n  const limit = parseInt(params.get(\"limit\")) || 10;\n\n  const debouncedQuery = useDebounce(query, 500);\n\n  useEffect(() => {\n    fetchBySubject(\"fiction\", { query: debouncedQuery, page, limit });\n  }, [debouncedQuery, page, limit]);\n\n  const updateParams = (newParams) => {\n    const p = new URLSearchParams(location.search);\n    Object.entries(newParams).forEach(([key, value]) => p.set(key, value));\n    navigate(`/books?${p.toString()}`);\n  };\n\n  \n\n  // return (\n  //   <main className=\"fiction-page\">\n  //     <h1 className=\"fiction-title\">Fiction Books</h1>\n\n  //     {loading ? (\n  //       <div className=\"loader\"></div>\n  //     ) : error ? (\n  //       <p className=\"error\">Error: {error}</p>\n  //     ) : (\n  //       <section className=\"fiction-grid\">\n  //         {books.length > 0 ? (\n  //           books.map((book) => (\n  //             <BookCard\n  //               key={book.key}\n  //               image={\n  //                 book.cover_id\n  //                   ? `https://covers.openlibrary.org/b/id/${book.cover_id}-M.jpg`\n  //                   : \"https://via.placeholder.com/150x220?text=No+Cover\"\n  //               }\n  //               rating={Math.floor(Math.random() * 5) + 1}\n  //               title={book.title}\n  //               author={book.authors ? book.authors[0].name : \"Unknown Author\"}\n  //               price={Math.floor(Math.random() * 30) + 10}\n  //             />\n  //           ))\n  //         ) : (\n  //           <p className=\"error\">No books found</p>\n  //         )}\n  //       </section>\n  //     )}\n  //   </main>\n  // );\n};\n\nexport default Fiction;"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,SAASC,WAAW,EAAEC,WAAW,QAAQ,kBAAkB;AAC3D,SAASC,QAAQ,QAAQ,4BAA4B;AACrD,SAASC,WAAW,QAAQ,yBAAyB;AAErD,OAAOC,QAAQ,MAAM,oCAAoC;AACzD,OAAOC,OAAO,MAAM,kCAAkC;AAEtD,OAAO,aAAa;AAEpB,MAAMC,OAAO,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACpB;;EAEA;EACA;EACA;;EAEA,MAAM;IAAEC,KAAK;IAAEC,OAAO;IAAEC,KAAK;IAAEC;EAAe,CAAC,GAAGT,QAAQ,CAAC,CAAC;EAC5D,MAAMU,QAAQ,GAAGZ,WAAW,CAAC,CAAC;EAC9B,MAAMa,QAAQ,GAAGZ,WAAW,CAAC,CAAC;EAE9B,MAAMa,MAAM,GAAG,IAAIC,eAAe,CAACH,QAAQ,CAACI,MAAM,CAAC;EACnD,MAAMC,KAAK,GAAGH,MAAM,CAACI,GAAG,CAAC,QAAQ,CAAC,IAAI,KAAK;EAC3C,MAAMC,IAAI,GAAGC,QAAQ,CAACN,MAAM,CAACI,GAAG,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC;EAC9C,MAAMG,KAAK,GAAGD,QAAQ,CAACN,MAAM,CAACI,GAAG,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE;EAEjD,MAAMI,cAAc,GAAGnB,WAAW,CAACc,KAAK,EAAE,GAAG,CAAC;EAE9ClB,SAAS,CAAC,MAAM;IACdY,cAAc,CAAC,SAAS,EAAE;MAAEM,KAAK,EAAEK,cAAc;MAAEH,IAAI;MAAEE;IAAM,CAAC,CAAC;EACnE,CAAC,EAAE,CAACC,cAAc,EAAEH,IAAI,EAAEE,KAAK,CAAC,CAAC;EAEjC,MAAME,YAAY,GAAIC,SAAS,IAAK;IAClC,MAAMC,CAAC,GAAG,IAAIV,eAAe,CAACH,QAAQ,CAACI,MAAM,CAAC;IAC9CU,MAAM,CAACC,OAAO,CAACH,SAAS,CAAC,CAACI,OAAO,CAAC,CAAC,CAACC,GAAG,EAAEC,KAAK,CAAC,KAAKL,CAAC,CAACM,GAAG,CAACF,GAAG,EAAEC,KAAK,CAAC,CAAC;IACtEjB,QAAQ,CAAC,UAAUY,CAAC,CAACO,QAAQ,CAAC,CAAC,EAAE,CAAC;EACpC,CAAC;;EAID;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;AACF,CAAC;AAACzB,EAAA,CA9DID,OAAO;EAAA,QAOuCJ,QAAQ,EACzCF,WAAW,EACXC,WAAW,EAOLE,WAAW;AAAA;AAAA8B,EAAA,GAhB9B3B,OAAO;AAgEb,eAAeA,OAAO;AAAC,IAAA2B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}